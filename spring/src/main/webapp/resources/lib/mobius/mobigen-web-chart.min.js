/*! mobigen-web-chart v0.5.2-23-g83a79a8 2017-04-12 */
!function(a,b){"function"==typeof require&&"undefined"==typeof define&&(a.d3=require("d3"),a.lodash=require("lodash")),"function"==typeof define&&define.amd?define(["d3","lodash"],b):a.MobigenWebChart=b(a.d3,a._)}(this,function(a,b){var c,d,e;return function(a){function b(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){return n.apply(a,v.call(arguments,0).concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(c){if(b(r,c)){var d=r[c];delete r[c],t[c]=!0,m.apply(a,d)}if(!b(q,c)&&!b(t,c))throw new Error("No "+c);return q[c]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(c,d,e,f){var h,k,l,m,n,s,u=[],v=typeof e;if(f=f||c,"undefined"===v||"function"===v){for(d=!d.length&&e.length?["require","exports","module"]:d,n=0;n<d.length;n+=1)if(m=o(d[n],f),k=m.f,"require"===k)u[n]=p.require(c);else if("exports"===k)u[n]=p.exports(c),s=!0;else if("module"===k)h=u[n]=p.module(c);else if(b(q,k)||b(r,k)||b(t,k))u[n]=j(k);else{if(!m.p)throw new Error(c+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=e?e.apply(q[c],u):void 0,c&&(h&&h.exports!==a&&h.exports!==q[c]?q[c]=h.exports:l===a&&s||(q[c]=l))}else c&&(q[c]=e)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,e=function(a,c,d){c.splice||(d=c,c=[]),!b(q,a)&&!b(r,a)&&(r[a]=[a,c,d])},e.amd={jQuery:!0}}(),e("almond",function(){}),e("module/layer.js",["require","lodash"],function(a){"use strict";function b(a){var b=a.append("g");this.el=this.selection=b,this.attr=b.attr.bind(b),this._width=0,this._height=0,this._left=0,this._top=0,this._id=null}var c=a("lodash");return b.prototype.width=function(a){return arguments.length?(this.el.attr("width",a),this._width=a,this):this._width},b.prototype.height=function(a){return arguments.length?(this.el.attr("height",a),this._height=a,this):this._height},b.prototype.translate=function(a,b){return arguments.length?(this._left=a,this._top=b,this.el.attr("transform","translate("+a+","+b+")"),this):{x:this._left,y:this._top}},b.prototype.point=b.prototype.translate,b.prototype.classes=function(a){return arguments.length?(this.el.attr("class",a),this):this.el.attr("class")},b.prototype.style=function(a,b,c){return 1===arguments.length?this.el.style(a):(this.el.style(a,b,c),this)},b.prototype.remove=function(){return this.el.remove(),this},b.prototype.createLayer=function(a){return this._container.createLayer(a,this.el)},b.prototype.createGroup=function(a){return this.el.append("g").attr("class",a)},b.prototype.toggle=function(a){c.isNumber(a)||(a=1e3);var b=this.el,d=this._hide;return a&&(b=b.transition().duration(a)),b.style("opacity",d?1:0),this._hide=!d,this},b.prototype.clipPath=function(a){var b=this._clip;if(!arguments.length)return b?b.attr("id"):"";b&&b.remove();var c=this.padding||{},d=c.left||0,e=c.right||0,f=c.top||0,g=c.bottom||0,h=this.width()-d-e,i=this.height()-f-g,j=this.el.append("defs");return j.append("clipPath").attr("id",a).append("rect").attr("x",d).attr("y",f).attr("width",h).attr("height",i),this._clip=j,this},b.prototype.clipBy=function(a){var b=a?"url(#"+a+")":null;return this.el.style("clip-path",b),this},b.prototype.createClipped=function(a){var b=a?"url(#"+a+")":null;return this.el.append("g").style("clip-path",b)},b}),e("module/container.js",["require","d3","lodash","./layer.js"],function(a){"use strict";function b(a,b){var d=b.width||960,e=b.height||400,f=c.select(a),g=f.append("svg").attr("width",d).attr("height",e);return this.parent=f,this.svg=g,this._width=d,this._height=e,this.layers={},this}var c=a("d3"),d=a("lodash"),e=a("./layer.js");return b.prototype.createLayer=function(a,b){var c=this.layers,d=c[a];if(d)return d;var f=new e(b||this.svg);return f._id=a,f._rm=f.remove,f.remove=function(){f._rm(),delete c[this._id]},f._container=this,c[a]=f,f},b.prototype.width=function(a){return arguments.length?(this.svg.attr("width",a),this._width=a,this):this._width},b.prototype.height=function(a){return arguments.length?(this.svg.attr("height",a),this._height=a,this):this._height},b.prototype.remove=function(){return d.each(this.layers,function(a){a.remove()}),this.svg.remove(),this},b}),e("global.js",["require","d3","lodash"],function(a){"use strict";var b=a("d3"),c=a("lodash");return{clipId:0,isVisibleState:function(){var a=document.visibilityState||document.mozVisibilityState||document.msVisibilityState||document.webkitVisibilityState;return"visible"===a},calcDomain:function(a,d,e){e=e||"number";var f;if("string"===e)f=c.map(a,d);else{c.isString(d)&&(d=[d]);var g=c.map(d,function(c){return b.extent(a,function(a){return a[c]})});f=b.extent(c.flatten(g))}return f},orNumbers:function(){return c.find(arguments,c.isNumber)}}}),e("module/axis.js",["require","d3","lodash","../global.js"],function(a){"use strict";function b(a,b,c){c=c||"axis";var d=b.createLayer(c).classes(c);this.layer=d;var g;switch(a.type){case"time":g=e.time.scale();break;case"string":g=e.scale.ordinal();break;default:g=e.scale.linear()}var h=e.svg.axis().scale(g);if(this._options=a,this._duration=0,this.scale=g,this.axis=h,void 0!==a.ticks&&this.ticks(a.ticks),a.tickFormat&&this.tickFormat(a.tickFormat),a.tickValues&&this.tickValues(a.tickValues),a.label&&(this._label=a.label),a.grid){var i=e.svg.axis().scale(g).tickFormat("");f.isNumber(a.grid)?i.ticks(a.grid):f.isArray(a.grid)&&i.tickValues(a.grid),this.grid=i}return this}function c(a,c,d){d=d||"x axis",b.call(this,a,c,d);var e=c.width(),f=c.height();"top"===a.position?a.orient=a.orient||"top":this.layer.point(0,f);var g=this.scale,h=this.axis,i=a.padding.left||0,j=a.padding.right||0,k=[i,e-j];switch(a.type){case"time":g.range(k);break;case"string":g.rangeRoundBands(k);break;default:g.range(k)}return h.orient(a.orient||"bottom"),this.grid&&this.grid.orient("top").tickSize(f,0,0),this.baseWidth=e,this.baseHeight=f,this}function d(a,c,d){d=d||"y axis",b.call(this,a,c,d);var e=c.width(),f=c.height();"right"===a.position&&(this.layer.point(e,0),a.orient=a.orient||"right");var g=this.scale,h=this.axis,i=a.padding.top||0,j=a.padding.bottom||0,k=[f-j,i];switch(a.type){case"time":g.range(k);break;case"string":g.rangeRoundBands(k);break;default:g.range(k)}return h.orient(a.orient||"left"),this.grid&&this.grid.orient("right").tickSize(e,0,0),this.baseWidth=e,this.baseHeight=f,this}var e=a("d3"),f=a("lodash"),g=a("../global.js");return b.prototype.duration=function(a){return this._duration=a,this},b.prototype.domain=function(a){return arguments.length?(this.scale.domain(a),this):this.scale.domain()},b.prototype.min=function(a){var b=this.scale.domain();return arguments.length?(this.scale.domain([a,b[1]]),this):b[0]},b.prototype.max=function(a){var b=this.scale.domain();return arguments.length?(this.scale.domain([b[0],a]),this):b[1]},b.prototype.domainByData=function(a){var b=this._options.type||"number",c=this._options.map,d=g.calcDomain(a,c,b),e=d[0],f=d[1],h=null;if("number"===b){if(e===f){h=[d[0]];var i=e?e/2:1;d[0]=e-i,d[1]=e+i}}else if("time"===b&&(e=e.getTime(),f=f.getTime(),e===f)){h=[d[0]];var j=1e3;d[0]=new Date(e-j),d[1]=new Date(e+j)}return this.tickValues(h),this.domain(d),this},b.prototype.ticks=function(a){var b=this.axis,c=this.scale;return arguments.length?(a+""=="false"&&(a=0),arguments.length>1?b.ticks.apply(b,arguments):f.isArray(a)?b.ticks.apply(b,a):b.ticks(a),this):b.ticks()||c.ticks()},b.prototype.tickFormat=function(a){var b=this.axis,c=this.scale;return arguments.length?(f.isString(a)&&(a="time"===this._options.type?e.time.format(a):e.format(a)),b.tickFormat(a),this):b.tickFormat()||c.tickFormat()},b.prototype.tickValues=function(a){var b=this.axis;return arguments.length?(b.tickValues(a),this):b.tickValues()},b.prototype.draw=function(){var a=this.layer,b=this.axis,c=this.grid,d=this._duration,e=this.axisEl;if(e||(e=a.el.append("g").attr("class","axis"),this.axisEl=e),d&&(e=e.transition().duration(d)),e.call(b),c){var f=this.gridEl;f||(f=a.el.append("g").attr("class","grid"),this.gridEl=f),d&&(f=f.transition().duration(d)),f.call(c)}var g=this._options.showMinMax;return g+""=="true"?this.drawMinMax():g+""=="false"&&this.removeMinMax(),this},b.prototype.drawMinMax=function(){var a=this.layer.el,b=this.scale,c=this.axis,d="function"==typeof b.rangeBands;if(!d){var f=b.domain(),g=b.range(),h=c.orient(),i=c.tickPadding(),j=c.tickSize(),k=this.tickFormat(),l=a.selectAll("g.axisMinMax").data(f);switch(l.enter().append("g").attr("class","axisMinMax").append("text"),l.exit().remove(),h){case"top":l.attr("transform",function(a){return"translate("+b(a)+",0)"}).select("text").attr("y",-(i+j)).style("text-anchor","middle").text(k);break;case"bottom":l.attr("transform",function(a){return"translate("+b(a)+",0)"}).select("text").attr("dy",".71em").attr("y",i+j).style("text-anchor","middle").text(k);break;case"left":l.attr("transform",function(a,b){return"translate(0,"+g[b]+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-(i+j)).attr("text-anchor","end").text(k);break;case"right":l.attr("transform",function(a,b){return"translate(0,"+g[b]+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",i+j).attr("text-anchor","start").text(k)}this.removeMinMax();var m=function(){return!1};if("top"===h||"bottom"===h){var n=[];l.each(function(a,c){c?n.push(b(a)-this.getBBox().width-4):n.push(b(a)+this.getBBox().width+4)}),m=function(a){var c=b(a);return c<n[0]||c>n[1]}}else"left"!==h&&"right"!==h||(m=function(a){var c=b(a);return c>g[0]-10||c<g[1]+10});return a.selectAll("g.tick").each(function(a){m(a)&&e.select(this).remove()}),this}},b.prototype.removeMinMax=function(){var a=this.layer.el,b=this.scale.domain();return a.selectAll("g.tick").each(function(a){var c=a===b[0]||a===b[1];c&&e.select(this).remove()}),this},c.prototype=Object.create(b.prototype),c.prototype.draw=function(){b.prototype.draw.apply(this,arguments);var a=this.layer,c=this._options,d=this._label,f=c.padding;if(f&&(f.left||f.right)){var g=this.domainLineEl;g||(g=a.el.append("path").attr("class","domain"),this.domainLineEl=g);var h=e.svg.line().x(function(a){return a.x}).y(function(a){return a.y});g.datum([{x:0,y:0},{x:this.baseWidth,y:0}]).attr("d",h)}if(d){var i="top"!==c.position?"-.71em":"1.2em",j=this.labelEl;j||(j=a.el.append("text").attr("class","axis-label"),this.labelEl=j),j.attr("class","axis-label").attr("x",this.baseWidth).attr("dy",i).style("text-anchor","end").text(d)}},d.prototype=Object.create(b.prototype),d.prototype.draw=function(){b.prototype.draw.apply(this,arguments);var a=this.layer,c=this._options,d=this._label,f=c.padding;if(f&&(f.top||f.bottom)){var g=this.domainLineEl;g||(g=a.el.append("path").attr("class","domain"),this.domainLineEl=g);var h=e.svg.line().x(function(a){return a.x}).y(function(a){return a.y});g.datum([{x:0,y:0},{x:0,y:this.baseHeight}]).attr("d",h)}if(d){var i="right"!==c.position?"1.2em":"-.71em",j=this.labelEl;j||(j=a.el.append("text").attr("class","axis-label"),this.labelEl=j),j.attr("transform","rotate(-90)").attr("dy",i).style("text-anchor","end").text(d)}},{Axis:b,XAxis:c,YAxis:d}}),e("module/legend.js",["require","d3","lodash"],function(a){"use strict";function b(a,b){return this.options=a,this.contWidth=b.width(),this.contHeight=b.height(),this.layer=b.createLayer("legend").classes("legends"),this}var c=a("d3"),d=a("lodash");return b.prototype.draw=function(a){var b=this.options.orient||"horizontal";return"horizontal"===b?this.drawHorizontal(a):"vertical"===b,this},b.prototype.drawHorizontal=function(a){var b=this.layer,e=this.contWidth,f=14;this.legend&&this.legend.remove();var g=b.el.selectAll("g.legend").data(d.map(a.domain().slice().reverse(),function(a){return{key:a,isShow:!0}})).enter().append("g").attr("class","legend");g.append("rect").attr("width",f).attr("height",f).style("fill",function(b){return a(b.key)}).style("stroke",function(b){return a(b.key)}),g.append("text").attr("x",20).attr("y",f/2).attr("dy",".35em").attr("font-size",f).text(function(a){return a.key});var h=0,i=16;return g.each(function(){var a=this.getBBox().width;h+=a+i,c.select(this).attr("transform","translate("+(e-h)+",0)")}),this.legend=g,this._color=a,this},b.prototype.click=function(a){return this.legend.on("click",a),this},b.prototype.toggle=function(a){var b=this._color;return this.legend.on("click",function(d){d.isShow=!d.isShow;var e=c.select(this).select("rect"),f=b(d.key);e.transition().ease("cubic-out").duration(500).style("fill",d.isShow?f:"#fff"),a(d.key,d.isShow)}),this},b}),e("module/straight.js",["require"],function(a){"use strict";function b(a,b,c){return this.layer=c,this.scale=b,this.options=a,this.className="straight",this}return b.prototype.setClass=function(a){this.className=a;var b=this.line;return b&&b.attr("class",a),this},b.prototype.addClass=function(a){this.className=this.className+" "+a;var b=this.line;return b&&b.classed(a,!0),this},b.prototype.removeClass=function(a){var b=this.line;return b&&b.classed(a,!1),this},b.prototype.draw=function(a){var b,c,d=this.layer,e=this.scale,f=this.options.direction,g=this.className;if("horizontal"===f){c=d.width();var h=e(a);b=d.el.append("svg:line").attr("class",g).attr("x1",0).attr("y1",h).attr("x2",c).attr("y2",h)}else if("vertical"===f){c=d.height();var i=e(a);b=d.el.append("svg:line").attr("class",g).attr("x1",i).attr("y1",0).attr("x2",i).attr("y2",c)}return this.line=b,this},b.prototype.remove=function(){return this.line&&this.line.remove(),this},b.prototype.move=function(a){return this},b}),e("module/shape/shape.js",["require","lodash"],function(a){"use strict";function b(a,b,c){return this.options=a,this.shapeLayer=b,this._shapeName="shapes",this._duration=0,this._color=c,this.layout=null,this.shape=null,this.group=null,this.el=null,this._position=function(){},this._style=function(){},this._tween=function(){},this}var c=a("lodash");return b.prototype.name=function(a){return arguments.length?(this._shapeName=a,this):this._shapeName},b.prototype.data=function(a){return arguments.length?(this._data=a,this):this._data},b.prototype.duration=function(a){return arguments.length?(this._duration=a,this):this._duration},b.prototype.style=function(a){return arguments.length?(this._style=a,this):this._style},b.prototype.update=function(){return this},b.prototype.redraw=function(){return this.el.call(this._position),this},b.prototype.toggle=function(a,b){var c=this.filter(a);c.style("display",null).style("opacity",b?0:1).transition().ease("cubic-out").duration(500).style("opacity",b?1:0),b||c.transition().delay(500).duration(0).style("display","none")},b.prototype.filter=function(a){if(c.isString(a)){var b=a;a=function(a){return a.key===b}}return this.group.filter(a)},b.prototype.nodes=function(){return this.el},b.prototype.remove=function(){return this.shape&&this.shape.remove(),this},b}),e("module/shape/path.js",["require","d3","./shape.js"],function(a){"use strict";function b(a,b,e,f){d.call(this,{},a,b),this._shapeName="paths",this.xScale=e,this.yScale=f;var g=this;return this._position=function(a){var b=g.layout;a.attr("d",function(a){return b(a.values)})},this._tween=function(a){var b=g.layout,d=c.scale.quantile().domain([0,1]).range(c.range(1,a.values.length+1));return function(c){return b(a.values.slice(0,d(c)))}},this}var c=a("d3"),d=a("./shape.js");return b.prototype=Object.create(d.prototype),b.prototype.update=function(){d.prototype.update.apply(this,arguments);var a=this._color,b=this._duration,c=this.shape.attr("class",this._shapeName),e=c.selectAll("g").data(this._data,function(a){return a.key});e.enter().append("g").style("fill",function(b){return a(b.key)}).style("stroke",function(b){return a(b.key)}).append("path"),e.exit().remove();var f=e.select("path").call(this._position);return b&&f.transition().duration(b).attrTween("d",this._tween),this.group=e,this.el=f,this},b.prototype.drawPoint=function(a){a=a||3;var b=this.layout,c=this._duration,d=this.group.append("g").attr("class","dots"),e=d.selectAll("circle").data(function(a){return a.values});return e.enter().append("circle"),e.exit().remove(),e.attr("cx",b.x()).attr("cy",b.y()).attr("r",a),c&&e.style("opacity",0).transition().delay(c).duration(500).style("opacity",1),this.dot=e,this},b.prototype.slide=function(a,b){var c=this._duration,d=this.el;if(c){var e=0;d.attr("transform",null).transition().duration(c).attr("transform","translate("+a+", 0)").each(function(){++e}).each("end",function(){--e||b()})}else d.attr("transform","translate("+a+", 0)"),b()},b.prototype.nodes=function(){return this.dot},b.prototype.clear=function(){return this.group&&this.group.remove(),this.dot&&this.dot.remove(),this},b}),e("module/shape/line.js",["require","d3","../../global.js","./path.js"],function(a){"use strict";function b(a,b,f,g){e.call(this,a,b,f,g),this._shapeName="lines";var h="line-clip"+d.clipId++;a.clipPath(h),this.shape=a.createClipped(h);var i=c.svg.line().x(function(a){var b=f(a.x);return f.rangeBand&&(b+=f.rangeBand()/2),b}).y(function(a){return g(a.y)});return this.layout=i,this}var c=a("d3"),d=a("../../global.js"),e=a("./path.js");return b.prototype=Object.create(e.prototype),b.prototype.update=function(){return e.prototype.update.apply(this,arguments),this.group.attr("class","line"),this},b}),e("module/shape/pie.js",["require","d3","lodash"],function(a){"use strict";function b(a,b){this.layer=b.createLayer("pie").classes("pie").point(b.width()/2,b.height()/2);var e,f,g;return d.isObject(a.radius)?(f=a.radius.outer,g=a.radius.inner):d.isNumber(a.radius)&&(e=a.radius),e=e||230,f=f||e-10,g=g||0,this.arc=c.svg.arc().outerRadius(f).innerRadius(g),this.pie=c.layout.pie().sort(null).value(function(a){return a.value}),this.tickFormat(a.key.format),this.options=a,this}var c=a("d3"),d=a("lodash");return b.prototype.draw=function(a,b){var c=this.layer,e=this.arc,f=this.pie,g=this.options,h=c.el.selectAll(".arc").data(f(a)).enter().append("g").attr("class","arc");h.append("path").attr("d",e).style("fill",function(a){return b(a.data.key)});var i=g.key.distance,j=this._format;j||(j=function(a,b){return b});var k=1.1;if(d.isNumber(i)){var l=i;i=function(a){return{x:a.x*l,y:a.y*l}}}return h.append("g").attr("class","ticks").attr("transform",function(a,b){var c=d.zipObject(["x","y"],e.centroid(a));return c=i(c,a.data.value,a.data.key,b),"translate("+c.x+","+c.y+")"}).selectAll("text").data(function(a){var b=a.data,c=j(b.value,b.key,b).split(/\r?\n/),e=k*(c.length/2)-k;return d.map(c,function(a){return{key:b.key,text:a,totalEm:e}})}).enter().append("text").attr("dy",function(a,b){return k*b-a.totalEm+"em"}).style("text-anchor","middle").style("fill",function(a){return b(a.key)}).text(function(a){return a.text}),this},b.prototype.tickFormat=function(a){return this._format=a,this},b}),e("module/shape/area.js",["require","d3","../../global.js","./path.js"],function(a){"use strict";function b(a,b,f,g){e.call(this,a,b,f,g),this._shapeName="areas";var h="area-clip"+d.clipId++;return a.clipPath(h),this.shape=a.createClipped(h),this.layout=c.svg.area(),this}var c=a("d3"),d=a("../../global.js"),e=a("./path.js");return b.prototype=Object.create(e.prototype),b.prototype.type=function(a){var b,c,d=this.xScale,e=this.yScale,f=function(a){var b=d(a.x);return d.rangeBand&&(b+=d.rangeBand()/2),b};return"stacked"===a?(b=function(a){return e(a.y0)},c=function(a){return e(a.y+a.y0)}):(b=e.range()[0],c=function(a){return e(a.y)}),this.layout.x(f).y0(b).y1(c),this._type=a,this},b.prototype.update=function(a){return this._type||this.type(),e.prototype.update.apply(this,arguments),this.group.attr("class","area"),this},b.prototype.translate=function(a){a?this.type(a):a=this._type;var b=this._duration,c=this.el;return b&&(c=c.transition().duration(b)),c.call(this._position),this},b}),e("module/layout/rect.js",[],function(){"use strict";function a(){this._x=function(){},this._y=function(){},this._width=function(){},this._height=function(){}}return a.prototype.x=function(a){return arguments.length?(this._x=a,this):this._x},a.prototype.y=function(a){return arguments.length?(this._y=a,this):this._y},a.prototype.width=function(a){return arguments.length?(this._width=a,this):this._width},a.prototype.height=function(a){return arguments.length?(this._height=a,this):this._height},function(){return new a}}),e("module/layout/text.js",[],function(){"use strict";function a(){var a=this;this._orient="top",this._x=function(){},this._y=function(){},this._dx=function(){var b=a._orient;return{left:-c+"em",right:c+"em",top:null,bottom:null}[b]},this._dy=function(g,h,i){if(0===h){var j=a._orient;return{left:d-c*i+"em",right:d-c*i+"em",top:b-e*i+"em",bottom:f+"em"}[j]}return e+"em"},this._textAnchor=function(){var b=a._orient;return{left:"end",right:"start",top:"middle",bottom:"middle"}[b]},this._text=function(a){return a}}var b=.25,c=2*b,d=3*b,e=4*b,f=6*b;return a.prototype.x=function(a){return arguments.length?(this._x=a,this):this._x},a.prototype.y=function(a){return arguments.length?(this._y=a,this):this._y},a.prototype.dx=function(a){return arguments.length?(this._dx=a,this):this._dx},a.prototype.dy=function(a){return arguments.length?(this._dy=a,this):this._dy},a.prototype.text=function(a){return arguments.length?(this._text=a,this):this._text},a.prototype.textAnchor=function(a){return arguments.length?(this._textAnchor=a,this):this._textAnchor},a.prototype.orient=function(a){return arguments.length?(this._orient=a,this):this._orient},function(){return new a}}),e("module/layout/layout.js",["require","./rect.js","./text.js"],function(a){"use strict";return{rect:a("./rect.js"),text:a("./text.js")}}),e("module/shape/rect.js",["require","../layout/layout.js","./shape.js"],function(a){"use strict";function b(a,b,e,f){d.call(this,{},a,b),this._shapeName="rects",this.shape=a.createGroup("rects"),this.xScale=e,this.yScale=f,this._size=0,this._padding=0;var g=c.rect();return this.layout=g,this._position=function(a){a.attr("x",g.x()).attr("y",g.y()).attr("width",g.width()).attr("height",g.height())},this}var c=a("../layout/layout.js"),d=a("./shape.js");return b.prototype=Object.create(d.prototype),b.prototype._calcSize=function(a){var b=this._size,c=this._padding;return b?c=(a-b)/2:c?b=a-2*c:(b=a*(4/6),c=a*(1/6)),this._size=b,this._padding=c,{size:b,padding:c}},b.prototype.type=function(a){return this},b.prototype.size=function(a){return arguments.length?(this._size=a,this):this._size},b.prototype.padding=function(a){return arguments.length?(this._padding=a,this):this._padding},b.prototype.update=function(a){d.prototype.update.apply(this,arguments),this._type||this.type();var b=this._shapeName,c=this._color,e=this._position,f=this.shape.attr("class",b),g=f.selectAll("g.rect").data(this._data,function(a){return a.key});g.enter().append("g").attr("class","rect").style("fill",function(a){return c(a.key)}),g.exit().remove();var h=g.selectAll("rect").data(function(a){return a.values});return h.enter().append("rect").call(e),h.exit().remove(),this.group=g,this.el=h,this},b.prototype.translate=function(a){return this},b}),e("module/shape/bar.js",["require","./rect.js"],function(a){"use strict";function b(a,b,d,e){return c.call(this,a,b,d,e),this._shapeName="bars",this}var c=a("./rect.js");return b.prototype=Object.create(c.prototype),b.prototype.type=function(a){var b=this.xScale,c=this.yScale;this._calcSize(c.rangeBand());var d,e,f,g,h=this._size,i=this._padding,j=this;return"stacked"===a?(e=function(a){return c(a.y)+i},d=function(a){return b(a.x0)},g=function(){return h},f=function(a){return b(a.x)}):(e=function(a,b,d){var e=j._data.length||1;return c(a.y)+h/e*d+i},d=function(){return b.range()[0]},g=function(){var a=j._data.length||1;return h/a},f=function(a){return b(a.x)}),this.layout.x(d).y(e).width(f).height(g),this._type=a,this},b.prototype.update=function(){c.prototype.update.apply(this,arguments);var a=this.el,b=this._duration,d=this._position;return b&&a.attr("width",0).attr("x",0).transition().duration(b).call(d),this},b.prototype.translate=function(a){a?this.type(a):a=this._type;var b=this.el,c=this.layout,d=this._position,e=this._duration;e?"stacked"===a?b.transition().duration(e/2).attr("x",c.x()).attr("width",c.width()).transition().attr("y",c.y()).attr("height",c.height()):b.transition().duration(e/2).attr("y",c.y()).attr("height",c.height()).transition().attr("x",c.x()).attr("width",c.width()):b.call(d)},b}),e("module/shape/column.js",["require","./rect.js"],function(a){"use strict";function b(a,b,d,e){return c.call(this,a,b,d,e),this._shapeName="columns",this}var c=a("./rect.js");return b.prototype=Object.create(c.prototype),b.prototype.type=function(a){var b=this.xScale,c=this.yScale;this._calcSize(b.rangeBand());var d,e,f,g,h=this._size,i=this._padding,j=this;return"stacked"===a?(d=function(a){return b(a.x)+i},e=function(a){return c(a.y0+a.y)},f=function(){return h},g=function(a){return c(a.y0)-c(a.y0+a.y)}):(d=function(a,c,d){var e=j._data.length||1;return b(a.x)+h/e*d+i},e=function(a){return c(a.y)},f=function(){var a=j._data.length||1;return h/a},g=function(a){return c.range()[0]-c(a.y)}),this.layout.x(d).y(e).width(f).height(g),this._type=a,this},b.prototype.update=function(a){c.prototype.update.apply(this,arguments);var b=this._position,d=this._duration,e=this.el;if(d){var f=this.yScale.range()[0];e.attr("height",0).attr("y",f).transition().duration(d).call(b)}return this},b.prototype.translate=function(a){a?this.type(a):a=this._type;var b=this.el,c=this.layout,d=this._position,e=this._duration;e?"stacked"===a?b.transition().duration(e/2).attr("y",c.y()).attr("height",c.height()).transition().attr("x",c.x()).attr("width",c.width()):b.transition().duration(e/2).attr("x",c.x()).attr("width",c.width()).transition().attr("y",c.y()).attr("height",c.height()):b.call(d)},b}),e("module/shape/value_text.js",["require","d3","lodash","../layout/layout.js","./shape.js"],function(a){"use strict";function b(a,b){f.call(this,{},a,b),this._shapeName="texts",this.shape=a.createGroup("texts"),this._isShow=!1;var d=e.text();return this.layout=d,this._position=function(a){var b=d.x(),e=d.y(),f=d.dx(),g=d.dy(),h=d.textAnchor();a.attr("y",e).each(function(){var a=c.select(this).selectAll("tspan"),d=a.data().length;a.attr("x",b.apply(null,arguments)).attr("dx",f).attr("dy",function(a,b){return g(a,b,d)})}).style("text-anchor",h)},this}var c=a("d3"),d=a("lodash"),e=a("../layout/layout.js"),f=a("./shape.js");return b.prototype=Object.create(f.prototype),b.prototype.format=function(a){return arguments.length?(this.layout.text(a),this):this.layout.text()},b.prototype.layout=function(a){return this.layout.x(a.x()),this.layout.y(a.y()),this},b.prototype.update=function(){f.prototype.update.apply(this,arguments);var a=this._color,b=this._duration,c=this.layout.text(),d=this._isShow,e=this.shape.attr("class",this._shapeName),g=e.selectAll("g.text").data(this._data,function(a){return a.key});g.enter().append("g").attr("class","text").style("fill",function(b){return a(b.key)}),g.exit().remove();var h=g.selectAll("text").data(function(a){return a.values});h.enter().append("text").style("display",d?null:"none").style("opacity",d?1:0),h.exit().remove();var i=h.selectAll("tspan").data(function(a){return(c(a)+"").split(/\r?\n/)});return i.enter().append("tspan").text(function(a){return a}),i.exit().remove(),h.call(this._position),b&&d&&h.style("opacity",0).transition().delay(b).duration(500).style("opacity",1),this.group=g,this.el=h,this},b.prototype.show=function(a,b){if(this._isShow=!0,this.el){var d;if(arguments.length){if(1===arguments.length){var e=a;d=this.filter(e)}else if(d=c.select(this.el[b][a]),d.classed("no-show"))return this}else d=this.el;var f=this._duration;return d.style("display",null).transition().ease("cubic-out").duration(f).style("opacity",1),this}},b.prototype.hide=function(a,b){if(this._isShow=!1,this.el){var d;if(arguments.length){if(1===arguments.length){var e=a;d=this.filter(e)}else if(d=c.select(this.el[b][a]),d.classed("no-hide"))return this}else d=this.el;var f=this._duration;return d.transition().ease("cubic-out").duration(f).style("opacity",0).transition().delay(f).duration(0).style("display","none"),this}},b.prototype.nodes=function(){return this.el},b.prototype.remove=function(){return this.group&&this.group.remove(),this},b.prototype.displayMax=function(a){var b=this._duration,e=this._position;return this.group.each(function(f){var g=c.select(this).selectAll("text"),h=d.max(f.values,"y"),i=g.filter(function(a){return a===h});if(i.attr("class","max_value no-hide").style("display",null).style("opacity",1),a){var j=i.selectAll("tspan").data(function(b){return(a(b)+"").split(/\r?\n/)});j.enter().append("tspan"),j.exit().remove(),j.text(function(a){return a})}i.call(e),b&&i.style("opacity",0).transition().delay(b).duration(500).style("opacity",1)}),this},b}),e("module/app.js",["require","./container.js","./axis.js","./legend.js","./straight.js","./shape/line.js","./shape/pie.js","./shape/area.js","./shape/bar.js","./shape/column.js","./shape/value_text.js"],function(a){"use strict";return{Container:a("./container.js"),axis:a("./axis.js"),Legend:a("./legend.js"),Straight:a("./straight.js"),Line:a("./shape/line.js"),Pie:a("./shape/pie.js"),Area:a("./shape/area.js"),Bar:a("./shape/bar.js"),Column:a("./shape/column.js"),ValueText:a("./shape/value_text.js")}}),e("chart/base/chart.js",["require","d3","lodash","../../module/container.js"],function(a){"use strict";function b(a,b){this.container=new e(a,b);var f,g=b.colors;f=d.isArray(g)?c.scale.ordinal().range(g):d.isString(g)?function(){return g}:g||c.scale.category20(),this.options=d.clone(b),this._color=f,this._duration=0}var c=a("d3"),d=a("lodash"),e=a("../../module/container.js");return b.prototype.duration=function(a){return this._duration=a,this},b.prototype.data=function(){return this},b.prototype.draw=function(){return this},b.prototype.redraw=function(){return this},b.prototype.update=function(){return this},b.prototype.remove=function(){return this.container.remove(),this},b}),e("chart/base/base_2a.js",["require","d3","lodash","../../global.js","./chart.js","../../module/axis.js","../../module/legend.js","../../module/straight.js"],function(a){"use strict";function b(a,b){f.call(this,a,b);var c=this.container,e=c.width(),g=c.height(),k={top:30,left:50,bottom:30,right:20},l={top:0,left:0,bottom:0,right:0};d.isObject(b.margin)?k=d.defaults(b.margin,k):d.isNumber(b.margin)&&(k={top:b.margin,left:b.margin,bottom:b.margin,right:b.margin}),d.isObject(b.padding)?l=d.defaults(b.padding,l):d.isNumber(b.padding)&&(l={top:b.padding,
left:b.padding,bottom:b.padding,right:b.padding}),b.xAxis.padding=l||{},b.yAxis.padding=l||{};var m=c.createLayer("base").classes("base").point(k.left,k.top);m.width(e-k.left-k.right),m.height(g-k.top-k.bottom),m.margin=k,m.padding=l,this.baseLayer=m,this.xAxis=new h(b.xAxis,m),this.yAxis=new i(b.yAxis,m);var n=m.createLayer("shapes").classes("shapes").width(m.width()).height(m.height());return this.layer=n,this.legend=new j(b,c),this._xDomainFixed=!1,this._yDomainFixed=!1,this._lines={x:[],y:[]},this}var c=a("d3"),d=a("lodash"),e=a("../../global.js").calcDomain,f=a("./chart.js"),g=a("../../module/axis.js"),h=g.XAxis,i=g.YAxis,j=a("../../module/legend.js"),k=a("../../module/straight.js");return b.prototype=Object.create(f.prototype),b.prototype.data=function(a){return this._xDomainFixed||this.xAxis.domainByData(a),this._yDomainFixed||this.yAxis.domainByData(a),this._data=a,this},b.prototype.duration=function(a){return f.prototype.duration.apply(this,arguments),this.xAxis.duration(a),this.yAxis.duration(a),this},b.prototype.draw=function(a){return a&&this.data(a),this.xAxis.draw(),this.yAxis.draw(),this},b.prototype.xDomain=function(a,b){return arguments.length?(this._xDomainFixed=b,this.xAxis.domain(a),this):this.xAxis.domain()},b.prototype.xMin=function(a){return arguments.length?(this.xAxis.min(a),this):this.xAxis.min()},b.prototype.xMax=function(a){return arguments.length?(this.xAxis.max(a),this):this.xAxis.max()},b.prototype.yDomain=function(a,b){return arguments.length?(this._yDomainFixed=b,this.yAxis.domain(a),this):this.yAxis.domain()},b.prototype.yMin=function(a){return arguments.length?(this.yAxis.min(a),this):this.yAxis.min()},b.prototype.yMax=function(a){return arguments.length?(this.yAxis.max(a),this):this.yAxis.max()},b.prototype._resetXAxis=function(a){var b=this.options,d=b.xAxis.map,e=b.xAxis.type,f=this.xAxis,g=f.domain(),h=g[0],i=g[1],j=c.max(a,function(a){return a[d]}),k=j-i;g="time"===e?[new Date(h.getTime()+k),new Date(i.getTime()+k)]:[h+k,i+k],f.domain(g).draw()},b.prototype._resetYAxis=function(a){var b=this.options,c=b.yAxis.map,d=b.yAxis.type,f=this.yAxis,g=f.domain(),h=g[0],i=g[1],j=e(a,c,d);g=[Math.min(h,j[0]),Math.max(i,j[1])],f.domain(g).draw()},b.prototype.appendLine=function(a,b,c){var d={},e=null,f=this.baseLayer;switch(a){case"x":d.direction="vertical",e=this.xAxis.scale;break;case"y":d.direction="horizontal",e=this.yAxis.scale;break;default:return void console.error("appendLine() >> invalid axis:",a)}var g=new k(d,e,f);return c&&g.addClass(c),g.draw(b),this._lines[a].push(g),g},b.prototype.removeLines=function(a){var b=this._lines;return a?b[a].forEach(function(a){a.remove()}):(b.x.forEach(function(a){a.remove()}),b.y.forEach(function(a){a.remove()})),this},b}),e("chart/virtual/slide_path.js",["require","lodash","../../global.js"],function(a){"use strict";function b(){}var c=a("lodash"),d=a("../../global.js").isVisibleState;return b.prototype._pushValues=function(a){var b=this.options,d=b.xAxis.map;c.each(this._data,function(b){var e=a[b.key];c.isNumber(e)&&b.values.push({x:a[d],y:e})})},b.prototype._shiftValues=function(a){return arguments.length?void c.each(this._data,function(b){b.values.splice(0,a)}):this._shiftValues(1)},b.prototype.push=function(a){return this._pushValues(a),this.shape.redraw(),this._queue.push(a),this},b.prototype.slide=function(){if(d()&&!this._isAnimate){this._isAnimate=!0;var a=this.xMin(),b=this._queue,c=b.length;this._queue=[],this._xDomainFixed||this._resetXAxis(b),this._yDomainFixed||this._resetYAxis(b);var e=this.xMin(),f=this,g=this.xAxis.scale(a),h=this.xAxis.scale(e);this.shape.slide(g-h,function(){f._isAnimate=!1,f._shiftValues(c)})}},b}),e("chart/virtual/inner_text.js",["require"],function(a){"use strict";function b(){}return b.prototype.showValue=function(a){return a?this.vtext.show():this.vtext.hide(),this._isShow=a,this},b.prototype.valueFormat=function(a){return this.vtext.format(a),this},b.prototype.displayMax=function(a){return this.vtext.displayMax(a),this},b}),e("chart/line_chart.js",["require","lodash","./base/base_2a.js","./virtual/slide_path.js","./virtual/inner_text.js","../module/shape/line.js","../module/shape/value_text.js"],function(a){"use strict";function b(a,b){d.call(this,a,b);var c=this.layer,e=this.xAxis.scale,f=this.yAxis.scale,i=this.yAxis.tickFormat(),j=this._color;return this.shape=new g(c,j,e,f),this.vtext=new h(c,j),this.vtext.format(function(a){return i(a.y)}),this._queue=[],this}var c=a("lodash"),d=a("./base/base_2a.js"),e=a("./virtual/slide_path.js"),f=a("./virtual/inner_text.js"),g=a("../module/shape/line.js"),h=a("../module/shape/value_text.js");return b.prototype=Object.create(d.prototype),c.extend(b.prototype,f.prototype),c.extend(b.prototype,e.prototype),b.prototype.data=function(a){d.prototype.data.apply(this,arguments);var b=this.options,e=b.xAxis.map,f=b.yAxis.map;c.isString(f)&&(f=[f]);var g=c.map(f,function(b){return{key:b,values:a.map(function(a){return{x:a[e],y:a[b]}})}});return this._data=g,this.shape.data(g),this.vtext.data(g),this},b.prototype.duration=function(a){return d.prototype.duration.apply(this,arguments),this.shape.duration(a),this.vtext.duration(a),this},b.prototype.draw=function(a){d.prototype.draw.apply(this,arguments);var b=this.shape,c=this.vtext;b.update(),c.layout.x(b.layout.x()).y(b.layout.y()),c.update();var e=this.options,f=this._color;return e.legend+""!="false"&&(this.legend.draw(f),this.legend.toggle(function(a,d){b.toggle(a,d),c.toggle(a,d)})),this},b.prototype.drawPoint=function(a){var b=this.shape,c=this.vtext;b.drawPoint(a);var d=this;return b.nodes().on("mouseover",function(a,b,e){d._isShow||c.duration(0).show(b,e)}).on("mouseleave",function(a,b,e){d._isShow||c.duration(0).hide(b,e)}),this},b}),e("chart/base/base_stack.js",["require","d3","lodash","./base_2a.js"],function(a){"use strict";function b(a,b){return e.call(this,a,b),this.stack=c.layout.stack().y(function(a){return a.y}).out(function(a,b,c){a.y0=b,a.y=c}).values(function(a){return a.values}),this._type="",this._domains={},this}var c=a("d3"),d=a("lodash"),e=a("./base_2a.js");return b.prototype=Object.create(e.prototype),b.prototype.type=function(a){return a?(this.yAxis.domain(this._domains[a]),this._type=a,this):this._type},b.prototype.data=function(a){e.prototype.data.apply(this,arguments);var b=this.options,f=b.xAxis.map,g=b.yAxis.map,h=this._type;d.isString(g)&&(g=[g]);var i=this.stack(d.map(g,function(b){return{key:b,values:a.map(function(a){return{x:a[f],y:a[b]}})}}));return this._domains.normal=this.yAxis.domain(),this._domains.grouped=this.yAxis.domain(),this._domains.stacked=[0,c.max(i,function(a){return c.max(a.values,function(a){return a.y+a.y0})})],this._data=i,this.type(h),this},b.prototype.translate=function(a){return this.xAxis.draw(),this.yAxis.draw(),this},b}),e("chart/bar_chart.js",["require","d3","lodash","./base/base_stack.js","./base/base_2a.js","./virtual/inner_text.js","../module/shape/bar.js","../module/shape/value_text.js"],function(a){"use strict";function b(a,b){b.bar=b.bar||{},e.call(this,a,b),this.stack.x(function(a){return a.y}).y(function(a){return a.x}).out(function(a,b,c){a.x0=b,a.x=c});var c=this.layer,d=this.xAxis.scale,f=this.yAxis.scale,g=this.xAxis.tickFormat(),j=this._color,k=b.bar?b.bar.size:0,l=b.bar?b.bar.padding:0;return this.bar=new h(c,j,d,f),this.bar.size(k),this.bar.padding(l),this.vtext=new i(c,j),this.vtext.format(function(a){return g(a.x)}),this._type=b.bar.type||"grouped",this}var c=a("d3"),d=a("lodash"),e=a("./base/base_stack.js"),f=a("./base/base_2a.js"),g=a("./virtual/inner_text.js"),h=a("../module/shape/bar.js"),i=a("../module/shape/value_text.js");return b.prototype=Object.create(e.prototype),d.extend(b.prototype,g.prototype),b.prototype.type=function(a){return a?(this.xAxis.domain(this._domains[a]),this._type=a,this.bar.type(a),this):this._type},b.prototype.duration=function(a){return e.prototype.duration.apply(this,arguments),this.bar.duration(a),this.vtext.duration(a),this},b.prototype.data=function(a){f.prototype.data.apply(this,arguments);var b=this.options,e=b.xAxis.map,g=b.yAxis.map,h=this._type;d.isString(e)&&(e=[e]);var i=this.stack(d.map(e,function(b){return{key:b,values:a.map(function(a){return{x:a[b],y:a[g]}})}}));return this._domains.normal=this.xAxis.domain(),this._domains.grouped=this.xAxis.domain(),this._domains.stacked=[0,c.max(i,function(a){return c.max(a.values,function(a){return a.x+a.x0})})],this._data=i,this.bar.data(i),this.vtext.data(i),this.type(h),this},b.prototype.draw=function(a){e.prototype.draw.apply(this,arguments);var b=this.bar,c=this.vtext;b.update(),c.layout.x(function(a){return b.layout.x()(a)+b.layout.width()(a)}).y(function(a,c,d){return b.layout.y()(a,c,d)+b.layout.height()(a)/2}).orient("right"),c.update();var d=this;return b.nodes().on("mouseover",function(a,b,e){d._isShow||c.duration(0).show(b,e)}).on("mouseleave",function(a,b,e){d._isShow||c.duration(0).hide(b,e)}),this},b.prototype.translate=function(a){e.prototype.translate.apply(this,arguments),this.bar.translate(a);var b=this.vtext,c=this._duration,d=this._isShow;return d&&b.nodes().style("opacity",0),b.update(),d&&b.nodes().style("display",null).transition().delay(c).duration(500).style("opacity",1),this},b}),e("chart/column_chart.js",["require","lodash","./base/base_stack.js","./virtual/inner_text.js","../module/shape/column.js","../module/shape/value_text.js"],function(a){"use strict";function b(a,b){b.column=b.column||{},d.call(this,a,b);var c=this.layer,e=this.xAxis.scale,h=this.yAxis.scale,i=this.yAxis.tickFormat(),j=this._color,k=b.column?b.column.size:0,l=b.column?b.column.padding:0;return this.column=new f(c,j,e,h),this.column.size(k),this.column.padding(l),this.vtext=new g(c,j),this.vtext.format(function(a){return i(a.y)}),this._type=b.column.type||"grouped",this}var c=a("lodash"),d=a("./base/base_stack.js"),e=a("./virtual/inner_text.js"),f=a("../module/shape/column.js"),g=a("../module/shape/value_text.js");return b.prototype=Object.create(d.prototype),c.extend(b.prototype,e.prototype),b.prototype.type=function(a){return d.prototype.type.apply(this,arguments),this.column.type(a),this},b.prototype.duration=function(a){return d.prototype.duration.apply(this,arguments),this.column.duration(a),this.vtext.duration(a),this},b.prototype.data=function(a){return d.prototype.data.apply(this,arguments),this.column.data(this._data),this.vtext.data(this._data),this},b.prototype.draw=function(a){d.prototype.draw.apply(this,arguments);var b=this.column,c=this.vtext;b.update(),c.layout.x(function(a,c,d){return b.layout.x()(a,c,d)+b.layout.width()(a)/2}).y(function(a){return b.layout.y()(a)}),c.update();var e=this;return b.nodes().on("mouseover",function(a,b,d){e._isShow||c.duration(0).show(b,d)}).on("mouseleave",function(a,b,d){e._isShow||c.duration(0).hide(b,d)}),this},b.prototype.translate=function(a){d.prototype.translate.apply(this,arguments),this.column.translate(a);var b=this.vtext,c=this._duration,e=this._isShow;return e&&b.nodes().style("opacity",0),b.update(),e&&b.nodes().style("display",null).transition().delay(c).duration(500).style("opacity",1),this},b}),e("chart/pie_chart.js",["require","lodash","./base/chart.js","../module/shape/pie.js"],function(a){"use strict";function b(a,b){d.call(this,a,b);var c=this.container,f=c.createLayer("base").classes("base").width(c.width()).height(c.height());return this.pie=new e(b,f,this._color),this.baseLayer=f,this._centerText=b.centerText,this._autoSort=!0,this}var c=a("lodash"),d=a("./base/chart.js"),e=a("../module/shape/pie.js");return b.prototype=Object.create(d.prototype),b.prototype.data=function(a){var b=this.options,d=b.key.map,e=b.value.map,f=c.map(a,function(a){return{key:a[d],value:a[e]}});return this._data=f,this},b.prototype.sort=function(a){var b=this._data;return arguments.length&&a!==!0?(this._autoSort=!1,(c.isFunction(a)||c.isString(a))&&(this._data=c.sortBy(b,a))):(this._autoSort=!0,this._data=c.sortBy(b,function(a){return a.value*-1})),this},b.prototype.draw=function(a){a&&this.data(a),this._autoSort&&this.sort(),this.pie.draw(this._data,this._color);var b=this.baseLayer,c=[b.width()/2,b.height()/2],d=this._centerText.split(/\r?\n/),e=1.1,f=e*(d.length/2)-e,g=b.el.append("g").attr("class","center-texts").attr("transform","translate("+c+")");return g.selectAll("text").data(d).enter().append("text").attr("dy",function(a,b){return e*b-f+"em"}).style("text-anchor","middle").text(function(a){return a}),this},b.prototype.centerText=function(a){return this._centerText=a,this},b.prototype.tickFormat=function(a){return this.pie.tickFormat(a),this},b}),e("chart/area_chart.js",["require","lodash","./base/base_stack.js","./virtual/slide_path.js","./virtual/inner_text.js","../module/shape/area.js","../module/shape/value_text.js"],function(a){"use strict";function b(a,b){b.area=b.area||{},d.call(this,a,b);var c=this.layer,e=this.xAxis.scale,f=this.yAxis.scale,i=this.yAxis.tickFormat(),j=this._color;return this.shape=new g(c,j,e,f),this.vtext=new h(c,j),this.vtext.format(function(a){return i(a.y)}),this._type=b.area.type||"normal",this._queue=[],this}var c=a("lodash"),d=a("./base/base_stack.js"),e=a("./virtual/slide_path.js"),f=a("./virtual/inner_text.js"),g=a("../module/shape/area.js"),h=a("../module/shape/value_text.js");return b.prototype=Object.create(d.prototype),c.extend(b.prototype,f.prototype),c.extend(b.prototype,e.prototype),b.prototype.data=function(a){return d.prototype.data.apply(this,arguments),this.shape.data(this._data),this.vtext.data(this._data),this},b.prototype.type=function(a){return d.prototype.type.apply(this,arguments),this.shape.type(a),this},b.prototype.duration=function(a){return d.prototype.duration.apply(this,arguments),this.shape.duration(a),this.vtext.duration(a),this},b.prototype.draw=function(a){d.prototype.draw.apply(this,arguments);var b=this.shape,c=this.vtext;b.update(),c.layout.x(b.layout.x()).y(b.layout.y()),c.update();var e=this.options,f=this._color;return e.legend+""!="false"&&(this.legend.draw(f),this.legend.toggle(function(a,d){b.toggle(a,d),c.toggle(a,d)})),this},b.prototype.drawPoint=function(a){var b=this.shape,c=this.vtext;b.drawPoint(a);var d=this;return b.nodes().on("mouseover",function(a,b,e){d._isShow||c.duration(0).show(b,e)}).on("mouseleave",function(a,b,e){d._isShow||c.duration(0).hide(b,e)}),this},b.prototype.translate=function(a){return d.prototype.translate.apply(this,arguments),this.shape.translate(a),this},b}),e("module/colors.js",["require"],function(a){"use strict";function b(a,b){this.defs=a,this.options=b}return b.prototype.radialGradient=function(a){"r"===a.charAt(0)&&(a=this.rgbToHex(a));var b="gradient_"+a.substring(1),c=this.shadeColor(a,-20),d=this.defs.selectAll("#"+b).data([b]).enter().append("radialGradient").attr("class","colorGradient").attr("id",b).attr("gradientUnits","objectBoundingBox").attr("fx","30%").attr("fy","30%");return d.append("stop").attr("offset","0%").attr("style","stop-color:#FFFFFF"),d.append("stop").attr("offset","40%").attr("style","stop-color:"+a),d.append("stop").attr("offset","100%").attr("style","stop-color:"+c),"url(#"+b+")"},b.prototype.rgbToHex=function(a){if("#"===a.substr(0,1))return a;var b=/rgb\((\d+),(\d+),(\d+)\)/.exec(a),c=parseInt(b[1]),d=parseInt(b[2]),e=parseInt(b[3]),f=e|d<<8|c<<16;return"#"+f.toString(16)},b.prototype.shadeColor=function(a,b){var c=function(a,b){var c=parseInt(a,16);c=parseInt(c*(100+b)/100),c=c<255?c:255;var d=c.toString(16);return 1===d.length?"0"+d:d},d=c(a.substring(1,3),b),e=c(a.substring(3,5),b),f=c(a.substring(5,7),b);return["#",d,e,f].join("")},b}),e("module/shape/circle.js",["require","./shape.js","../colors.js"],function(a){"use strict";function b(a,b,e,f,g,h){c.call(this,a,b,e),this._shapeName="circles",this.rScale=h,this.shape=b.createGroup("circles");var i=a.xAxis.map,j=a.yAxis.map,k=a.radius.map,l=a.key,m=new d(b.el.append("defs"),{});this._position=function(a){a.attr("cx",function(a){return f(a[i])}).attr("cy",function(a){return g(a[j])}).attr("r",function(a){return h(a[k])})},this._style=function(a){a.style("fill",function(a){return m.radialGradient(e(a[l]))})},this._colors=m}var c=a("./shape.js"),d=a("../colors.js");return b.prototype=Object.create(c.prototype),b.prototype.update=function(){c.prototype.update.apply(this,arguments);var a=this.shape.attr("class",this._shapeName),b=a.selectAll("circle").data(this._data);return b.enter().append("circle").call(this._position).call(this._style),b.exit().remove(),this.group=a,this.el=b,this},b}),e("module/tooltip.js",["require","lodash"],function(a){"use strict";function b(a){return this.container=a,this._left=0,this._top=0,this._template="",this._isShow=!1,this}var c=a("lodash");return b.prototype.move=function(a,b){return this.el&&this.el.style("left",a+"px").style("top",b+"px"),this._left=a,this._top=b,this},b.prototype.format=function(a){return this._format=a,this},b.prototype.html=function(a){return this.el&&this.el.html(a),this._template=a,this},b.prototype.data=function(a){if(this._format)return this.html(this._format(a));var b=c.map(a,function(a,b){return"_"===b[0]?"":'<tr><td class="data-key">'+b+': </td><td class="data-val">'+a+"</td></tr>"}),d=[].concat(["<table>"],b,["</table>"]).join("");return this.html(d),this},b.prototype.show=function(){return this.el||this.create(),this.el.style("display",null),this._isShow=!0,this},b.prototype.hide=function(){return this.el||this.create(),this.el.style("display","none"),this._isShow=!1,this},b.prototype.toggle=function(){return this._isShow?this.hide():this.show(),this},b.prototype.create=function(){var a=this._x,b=this._y,c=this._template;return this.el=this.container.parent.append("div").attr("class","chart-tooltip").style("left",a+"px").style("top",b+"px").html(c).style("display","none"),this},b.prototype.remove=function(){return this.el&&(this.el.remove(),this.el=null),this},b}),e("chart/circle_chart.js",["require","d3","./base/base_2a.js","../module/shape/circle.js","../module/tooltip.js"],function(a){"use strict";function b(a,b){d.call(this,a,b);var g=b.radius,h=g.min||g.range[0],i=g.max||g.range[1],j=this.layer,k=this.xAxis.scale,l=this.yAxis.scale,m=c.scale.sqrt().range([h,i]),n=this._color;return this.circle=new e(b,j,n,k,l,m),this.tooltip=new f(this.container),b.tooltip&&this.tooltip.format(b.tooltip.format),this.rScale=m,this}var c=a("d3"),d=a("./base/base_2a.js"),e=a("../module/shape/circle.js"),f=a("../module/tooltip.js");return b.prototype=Object.create(d.prototype),b.prototype.data=function(a){d.prototype.data.apply(this,arguments);var b,e=this.options,f=e.radius.map;return"string"!==e.radius.type&&(b=c.extent(a,function(a){return a[f]})),this.rScale.domain(b),this.circle.data(a),this._data=a,this},b.prototype.rDomain=function(a){return arguments.length?(this.rScale.domain(a),this):this.rScale.domain()},b.prototype.draw=function(a){return d.prototype.draw.apply(this,arguments),this.circle.update(),this._setTooltip(),this},b.prototype._setTooltip=function(){var a=this.circle,b=this.tooltip;a.nodes().on("mouseover",function(a){c.select(this).classed("mouseover",!0),b.data(a).show()}).on("mousemove",function(){b.move(c.event.layerX,c.event.layerY+28)}).on("mouseleave",function(){c.select(this).classed("mouseover",!1),b.hide()})},b.prototype.setTooltipFormat=function(a){return this.tooltip.format(a),this},b.prototype.remove=function(){return d.prototype.remove.apply(this,arguments),this.tooltip.remove(),this},b.prototype.nodes=function(){return this.circle.nodes()},b}),e("chart/single_bar_chart.js",["require","d3","lodash","./base/base_2a.js"],function(a){"use strict";function b(a,b){return e.call(this,a,b),this._size=b.bar?b.bar.size:0,this._padding=b.bar?b.bar.padding:0,this}var c=a("d3"),d=a("lodash"),e=a("./base/base_2a.js");return b.prototype=Object.create(e.prototype),b.prototype.data=function(a){e.prototype.data.apply(this,arguments);var b=this.options,c=b.xAxis.map,f=b.yAxis.map,g=d.map(a,function(a){return{key:a[f],value:a[c]}});return this._data=g,this},b.prototype.draw=function(a){function b(a){a.attr("x",0).attr("y",0).attr("width",function(a){return j(a.value)}).attr("height",n)}e.prototype.draw.apply(this,arguments);var d=this._color,f=this._duration,g=this._size,h=this._padding,i=this.layer,j=this.xAxis.scale,k=this.yAxis.scale,l=this._valueFormat||this.xAxis.tickFormat(),m=this._isShowValue;this.el&&this.el.remove();var n,o,p=k.rangeBand();g?(n=g,o=(p-g)/2):h?(n=p-2*h,o=h):(n=p*(4/6),o=p*(1/6));var q=i.el.selectAll("g.bar").data(this._data).enter().append("g").attr("class","bar").style("fill",function(a){return d(a.key)}).attr("transform",function(a){var b=k(a.key)+o;return"translate(0,"+b+")"}),r=q.append("rect").call(b);return q.append("text").attr("x",function(a){return j(a.value)}).attr("y",n/2).attr("dx",".71em").attr("dy",".35em").text(function(a){return l(a.value)}).style("text-anchor","start").style("opacity",m?1:0),f&&r.attr("width",0).transition().duration(f).call(b),m||q.on("mouseover",function(){c.select(this).selectAll("text").style("opacity",1)}).on("mouseleave",function(){c.select(this).selectAll("text").style("opacity",0)}),this.el=q,this},b.prototype.valueFormat=function(a){return this._valueFormat=a,this},b.prototype.showValue=function(a){return this._isShowValue=a,this},b.prototype.addTopText=function(a,b){var c,d,e=this.baseLayer,f=b.offset,g=b.color;return f&&f.x&&f.y?(c=e.width()+f.x,d=f.y):(c=e.width(),d=0),e.el.append("text").attr("transform","translate("+c+","+d+")").style("text-anchor","end").attr("fill",g).text(a),this},b}),e("chart/single_column_chart.js",["require","d3","lodash","./base/base_2a.js"],function(a){"use strict";function b(a,b){return e.call(this,a,b),this._size=b.column?b.column.size:0,this._padding=b.column?b.column.padding:0,this}var c=a("d3"),d=a("lodash"),e=a("./base/base_2a.js");return b.prototype=Object.create(e.prototype),b.prototype.data=function(a){e.prototype.data.apply(this,arguments);var b=this.options,c=b.xAxis.map,f=b.yAxis.map,g=d.map(a,function(a){return{key:a[c],value:a[f]}});return this._data=g,this},b.prototype.draw=function(a){function b(a){a.attr("x",0).attr("y",0).attr("width",o).attr("height",function(a){return j-l(a.value)})}e.prototype.draw.apply(this,arguments);var d=this._color,f=this._duration,g=this._size,h=this._padding,i=this.layer,j=i.height(),k=this.xAxis.scale,l=this.yAxis.scale,m=this._valueFormat||this.yAxis.tickFormat(),n=this._isShowValue;this.el&&this.el.remove();var o,p,q=k.rangeBand();g?(o=g,p=(q-g)/2):h?(o=q-2*h,p=h):(o=q*(4/6),p=q*(1/6));var r=i.el.selectAll("g.column").data(this._data).enter().append("g").attr("class","column").style("fill",function(a){return d(a.key)}).attr("transform",function(a){var b=[k(a.key)+p,l(a.value)];return"translate("+b+")"}),s=r.append("rect").call(b);return r.append("text").attr("x",o/2).attr("y",0).attr("dy","-.71em").text(function(a){return m(a.value)}).style("text-anchor","middle").style("opacity",n?1:0),f&&s.attr("height",0).attr("y",function(a){return j-l(a.value)}).transition().duration(f).call(b),n||r.on("mouseover",function(){c.select(this).selectAll("text").style("opacity",1)}).on("mouseleave",function(){c.select(this).selectAll("text").style("opacity",0)}),this.el=r,this},b.prototype.valueFormat=function(a){return this._valueFormat=a,this},b.prototype.showValue=function(a){return this._isShowValue=a,this},b.prototype.addTopText=function(a,b){var c,d,e=this.baseLayer,f=b.offset,g=b.color;return f&&f.x&&f.y?(c=e.width()+f.x,d=f.y):(c=e.width(),d=0),e.el.append("text").attr("transform","translate("+c+","+d+")").style("text-anchor","end").attr("fill",g).text(a),this},b}),e("chart/base/base_combo.js",["require","lodash","./chart.js","../../module/axis.js","../../module/legend.js"],function(a){"use strict";function b(a,b){d.call(this,a,b);var e=this.container,i=e.width(),j=e.height(),k={top:30,left:50,bottom:30,right:50},l={top:0,left:0,bottom:0,right:0};c.isObject(b.margin)?k=c.defaults(b.margin,k):c.isNumber(b.margin)&&(k={top:b.margin,left:b.margin,bottom:b.margin,right:b.margin}),c.isObject(b.padding)?l=c.defaults(b.padding,l):c.isNumber(b.padding)&&(l={top:b.padding,left:b.padding,bottom:b.padding,right:b.padding}),b.xAxis.padding=l||{},c.each(b.yAxis,function(a){a.padding=l||{}}),c.some(c.map(b.yAxis,"position"))||(c.values(b.yAxis)[1].position="right");var m=e.createLayer("base").classes("base").point(k.left,k.top);m.width(i-k.left-k.right),m.height(j-k.top-k.bottom),m.margin=k,m.padding=l,this.baseLayer=m,this.xAxis=new f(b.xAxis,m),this.yAxis={};var n=this;c.each(b.yAxis,function(a,b){n.yAxis[b]=new g(a,m,"y"+b+" axis"),n.yAxis[b].bFixed=!1});var o=m.createLayer("shapes").classes("shapes").width(m.width()).height(m.height());return this.layer=o,this.legend=new h(b,e),this._xDomainFixed=!1,this}var c=a("lodash"),d=a("./chart.js"),e=a("../../module/axis.js"),f=e.XAxis,g=e.YAxis,h=a("../../module/legend.js");return b.prototype=Object.create(d.prototype),b.prototype.data=function(a){return this._xDomainFixed||this.xAxis.domainByData(a),c.each(this.yAxis,function(b){b.bFixed||b.domainByData(a)}),this._data=a,this},b.prototype.duration=function(a){return d.prototype.duration.apply(this,arguments),this.xAxis.duration(a),c.each(this.yAxis,function(b){b.duration(a)}),this},b.prototype.draw=function(a){return a&&this.data(a),this.xAxis.draw(),c.each(this.yAxis,function(a){a.draw()}),this},b.prototype.xDomain=function(a,b){return arguments.length?(this._xDomainFixed=b,this.xAxis.domain(a),this):this.xAxis.domain()},b.prototype.xMin=function(a){return arguments.length?(this.xAxis.min(a),this):this.xAxis.min()},b.prototype.xMax=function(a){return arguments.length?(this.xAxis.max(a),this):this.xAxis.max()},b.prototype.yDomain=function(a,b,c){return arguments.length>1?(this.yAxis[a].bFixed=c,this.yAxis[a].domain(b),this):this.yAxis[a].domain()},b.prototype.yMin=function(a,b){return arguments.length>1?(this.yAxis[a].min(b),this):this.yAxis[a].min()},b.prototype.yMax=function(a,b){return arguments.length>1?(this.yAxis[a].max(b),this):this.yAxis[a].max()},b}),e("chart/line_column_chart.js",["require","lodash","./base/base_combo.js","../module/shape/line.js","../module/shape/column.js","../module/shape/value_text.js"],function(a){"use strict";function b(a,b){d.call(this,a,b);var c=this.layer,h=this.xAxis.scale,i=this.yAxis.column.scale,j=this.yAxis.line.scale,k=this.yAxis.column.tickFormat(),l=this.yAxis.line.tickFormat(),m=this._color;return this.column=new f(c,m,h,i),this.vtextColumn=new g(c,m),this.vtextColumn.name("texts column").format(function(a){return k(a.y)}),this.line=new e(c,m,h,j),this.vtextLine=new g(c,m),this.vtextLine.name("texts line").format(function(a){return l(a.y)}),this}var c=a("lodash"),d=a("./base/base_combo.js"),e=a("../module/shape/line.js"),f=a("../module/shape/column.js"),g=a("../module/shape/value_text.js");return b.prototype=Object.create(d.prototype),b.prototype.duration=function(a){return d.prototype.duration.apply(this,arguments),this.column.duration(a),this.line.duration(a),this.vtextColumn.duration(a),this.vtextLine.duration(a),this},b.prototype.data=function(a){d.prototype.data.apply(this,arguments);var b=this.options,e=b.xAxis.map,f={};return c.each(this.yAxis,function(d,g){var h=b.yAxis[g].map;c.isString(h)&&(h=[h]);var i=c.map(h,function(b){return{key:b,values:a.map(function(a){return{x:a[e],y:a[b]}})}});f[g]=i}),this._data=f,this.column.data(f.column),this.vtextColumn.data(f.column),this.line.data(f.line),this.vtextLine.data(f.line),this},b.prototype.drawColumn=function(){var a=this.column,b=this.vtextColumn;a.update(),b.layout.x(function(b,c,d){return a.layout.x()(b,c,d)+a.layout.width()(b)/2}).y(function(b){return a.layout.y()(b)}),b.update();var c=this;return a.nodes().on("mouseover",function(a,d,e){c._isShow||b.duration(0).show(d,e)}).on("mouseleave",function(a,d,e){c._isShow||b.duration(0).hide(d,e)}),this},b.prototype.drawLine=function(){var a=this.line,b=this.vtextLine;return a.update(),b.layout.x(a.layout.x()).y(a.layout.y()),b.update(),this},b.prototype.draw=function(){d.prototype.draw.apply(this,arguments),this.drawColumn(),this.drawLine();var a=this.options,b=this._color,c=this.column,e=this.vtextColumn,f=this.line,g=this.vtextLine;return a.legend+""!="false"&&(this.legend.draw(b),this.legend.toggle(function(b,d){b===a.yAxis.line.map?(f.toggle(b,d),g.toggle(b,d)):(c.toggle(b,d),e.toggle(b,d))})),this},b.prototype.drawPoint=function(a){var b=this.line,c=this.vtextLine;b.drawPoint(a);var d=this;return b.nodes().on("mouseover",function(a,b,e){d._isShow||c.duration(0).show(b,e)}).on("mouseleave",function(a,b,e){d._isShow||c.duration(0).hide(b,e)}),this},b.prototype.showValue=function(a){return a?(this.vtextColumn.show(),this.vtextLine.show()):(this.vtextColumn.hide(),this.vtextLine.hide()),this._isShow=a,this},b.prototype.valueFormat=function(a){return this.vtextColumn.format(a),this.vtextLine.format(a),this},b.prototype.displayMax=function(a){return this.vtextColumn.displayMax(a),this.vtextLine.displayMax(a),this},b}),function(a,b){"function"==typeof e&&e.amd?e("component/slider.js",["d3"],b):"object"==typeof exports?(process.browser&&d("./d3.slider.css"),module.exports=b(d("d3"))):a.d3.slider=b(a.d3)}(this,function(a){return function(){"use strict";function b(b){b.each(function(){function b(b){"boolean"==typeof r&&(r=a.svg.axis().ticks(Math.round(l/100)).tickFormat(x).orient("horizontal"===q?"bottom":"right")),i=h.ticks?h.copy().range([0,l]):h.copy().rangePoints([0,l],.5),r.scale(i);var c=b.append("svg").classed("d3-slider-axis d3-slider-axis-"+r.orient(),!0).on("click",A),d=c.append("g");"horizontal"===q?(c.style("margin-left",-s+"px"),c.attr({width:l+2*s,height:s}),"top"===r.orient()?(c.style("top",-s+"px"),d.attr("transform","translate("+s+","+s+")")):d.attr("transform","translate("+s+",0)")):(c.style("top",-s+"px"),c.attr({width:s,height:l+2*s}),"left"===r.orient()?(c.style("left",-s+"px"),d.attr("transform","translate("+s+","+s+")")):d.attr("transform","translate(0,"+s+")")),d.call(r)}function o(){if("array"!=f(g)){var b=Math.max(0,Math.min(l,a.event.offsetX||a.event.layerX));c(h.invert?d(h.invert(b/l)):e(b/l))}}function p(){if("array"!=f(g)){var b=l-Math.max(0,Math.min(l,a.event.offsetY||a.event.layerY));c(h.invert?d(h.invert(b/l)):e(b/l))}}function u(){"handle-one"===a.event.sourceEvent.target.id?t=1:"handle-two"==a.event.sourceEvent.target.id&&(t=2);var b=Math.max(0,Math.min(l,a.event.x));c(h.invert?d(h.invert(b/l)):e(b/l))}function z(){"handle-one"===a.event.sourceEvent.target.id?t=1:"handle-two"==a.event.sourceEvent.target.id&&(t=2);var b=l-Math.max(0,Math.min(l,a.event.y));c(h.invert?d(h.invert(b/l)):e(b/l))}function A(){a.event.stopPropagation()}h||(h=a.scale.linear().domain([m,n])),g=g||h.domain()[0];var B=a.select(this).classed("d3-slider d3-slider-"+q,!0),C=a.behavior.drag();if(C.on("dragend",function(){v.slideend(a.event,g)}),"array"==f(g)&&2==g.length?(j=B.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(C),y=B.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",A).call(C)):j=B.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(C),"horizontal"===q){if(B.on("click",o),"array"==f(g)&&2==g.length){k=a.select(this).append("div").classed("d3-slider-range",!0),j.style("left",w(h(g[0]))),k.style("left",w(h(g[0]))),C.on("drag",u);var D=100-parseFloat(w(h(g[1])));y.style("left",w(h(g[1]))),k.style("right",D+"%"),C.on("drag",u)}else j.style("left",w(h(g))),C.on("drag",u);l=parseInt(B.style("width"),10)}else{if(B.on("click",p),C.on("drag",z),"array"==f(g)&&2==g.length){k=a.select(this).append("div").classed("d3-slider-range-vertical",!0),j.style("bottom",w(h(g[0]))),k.style("bottom",w(h(g[0]))),C.on("drag",z);var E=100-parseFloat(w(h(g[1])));y.style("bottom",w(h(g[1]))),k.style("top",E+"%"),C.on("drag",z)}else j.style("bottom",w(h(g))),C.on("drag",z);l=parseInt(B.style("height"),10)}r&&b(B)});
}function c(b){var c="array"==f(g)&&2==g.length?g[t-1]:g,e=w(h(d(c))),i=w(h(d(b))),l="horizontal"===q?"left":"bottom";if(e!==i){if("array"==f(g)&&2==g.length?(g[t-1]=b,a.event&&v.slide(a.event,g)):a.event&&v.slide(a.event.sourceEvent||a.event,g=b),g[0]>=g[1])return;if(1===t)"array"==f(g)&&2==g.length&&("left"===l?k.style("left",i):k.style("bottom",i)),p?j.transition().styleTween(l,function(){return a.interpolate(e,i)}).duration("number"==typeof p?p:250):j.style(l,i);else{var m=100-parseFloat(i),n=100-parseFloat(i);"left"===l?k.style("right",m+"%"):k.style("top",n+"%"),p?y.transition().styleTween(l,function(){return a.interpolate(e,i)}).duration("number"==typeof p?p:250):y.style(l,i)}}}function d(a){if(a===h.domain()[0]||a===h.domain()[1])return a;var b=a;if(u)b=e(h(a));else{var c=(a-h.domain()[0])%o;b=a-c,2*Math.abs(c)>=o&&(b+=c>0?o:-o)}return b}function e(a){var b=h.ticks?h.ticks():h.domain(),c=b.map(function(b){return a-h(b)}),d=-1,e=0,f=h.ticks?h.range()[1]:h.rangeExtent()[1];do d++,Math.abs(c[d])<f&&(f=Math.abs(c[d]),e=d);while(c[d]>0&&d<c.length-1);return b[e]}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var g,h,i,j,k,l,m=0,n=100,o=.01,p=!0,q="horizontal",r=!1,s=50,t=1,u=!1,v=a.dispatch("slide","slideend"),w=a.format(".2%"),x=a.format(".0"),y=null;return b.min=function(a){return arguments.length?(m=a,b):m},b.max=function(a){return arguments.length?(n=a,b):n},b.step=function(a){return arguments.length?(o=a,b):o},b.animate=function(a){return arguments.length?(p=a,b):p},b.orientation=function(a){return arguments.length?(q=a,b):q},b.axis=function(a){return arguments.length?(r=a,b):r},b.margin=function(a){return arguments.length?(s=a,b):s},b.value=function(a){return arguments.length?(g&&c(d(a)),g=a,b):g},b.snap=function(a){return arguments.length?(u=a,b):u},b.scale=function(a){return arguments.length?(h=a,b):h},a.rebind(b,v,"on"),b}}),e("chart/motion_chart.js",["require","d3","lodash","./circle_chart.js","../component/slider.js"],function(a){"use strict";function b(a,b){return b.slider&&(b.height-=100),g.call(this,a,b),this._duration=b.duration||0,this._tLimit=!0,this._initForOpacity(b),this}function c(a,b,c){var d=i(a,b,0,a.length-1),e=a[d];if(d>0){var f=a[d-1],g=(b-e[0])/(f[0]-e[0]);return c&&(g=Math.max(g,0),g=Math.min(g,1)),e[1]*(1-g)+f[1]*g}return e[1]}function d(a,b){var c=b.key,d=b.series.map,e=[],g={},h=f(a[0]).chain().keys().without(c).value();return a.forEach(function(a){g[c]=a[c];var b=f.find(e,g);b||(b={},b[c]=a[c],e.push(b));for(var i=0,j=h.length;i<j;i++){var k=h[i];b[k]||(b[k]=[]),b[k].push([a[d],a[k]])}}),e}var e=a("d3"),f=a("lodash"),g=a("./circle_chart.js"),h=a("../component/slider.js");b.prototype=Object.create(g.prototype),b.prototype._initForOpacity=function(a){var b=this.circle;if(this.opacity={min:0,max:.5},a.lostData&&"interpolate"!==a.lostData.type){var c,d=a.lostData.opacity;d&&(c=f.isArray(d)?{min:d[0],max:d[1]}:d,this.opacity=c);var e=b.style(),g=function(a){e(a),a.style("opacity",function(a){return a._style.opacity}).style("display",function(a){return a._style.opacity<0?"none":null})};b.style(g)}},b.prototype._calculateGap=function(a,b){for(var c=f.chain(a).map(function(a){return a[b].getTime()}).sortBy().uniq().value(),d=c.length,e=Math.abs(c[d-1]-c[d-2]),g=d-2;g>=1;g--){var h=Math.abs(c[g]-c[g-1]);e=Math.min(e,h)}this._gap=e},b.prototype.duration=function(a){return this._duration=a,this},b.prototype.supposeLast=function(a){return this._tLimit=!a,this},b.prototype.timeDomain=function(a){return arguments.length?(this._timeDomain=a,this):this._timeDomain},b.prototype.data=function(a,b){var c,f,g=this.options,h=g.xAxis.map,i=g.yAxis.map,j=g.radius.map,k=g.series.map;if(g.lostData&&this._calculateGap(a,k),b){var l,m,n,o,p,q;m=l=a[0][h][0][1],o=n=a[0][i][0][1],q=p=a[0][j][0][1],f=c=a[0][h][0][0];var r,s,t,u,v,w;for(r=0,t=a.length;r<t;r++){var x=a[r],y=x[h],z=x[i],A=x[j];for(s=0,u=y.length;s<u;s++)m=Math.max(m,y[s][1]),l=Math.min(l,y[s][1]),f=Math.max(f,y[s][0]),c=Math.min(c,y[s][0]);for(s=0,v=z.length;s<v;s++)o=Math.max(o,z[s][1]),n=Math.min(n,z[s][1]);for(s=0,w=A.length;s<w;s++)q=Math.max(q,A[s][1]),p=Math.min(p,A[s][1])}this.xDomain([l,m]),this.yDomain([n,o]),this.rDomain([p,q]),this.timeDomain([c,f])}else this.xDomain(e.extent(a,function(a){return a[h]})),this.yDomain(e.extent(a,function(a){return a[i]})),this.rDomain(e.extent(a,function(a){return a[j]})),this.timeDomain(e.extent(a,function(a){return a[k]})),a=d(a,g);return this._data=a,this},b.prototype.draw=function(a,b){function d(a,b){return b[n]-a[n]}function g(){var a=e.interpolateNumber(t,s);return function(b){var c=a(b);h(new Date(c)),z&&z.value(c)}}function h(a){a=a||r,t=a,C.data(l(a),function(a){return a[p]}).call(D).call(E).sort(d)}function j(a){var b=w+a/(y*F)*(x-w);return Math.max(x,b)}function k(a,b){var c=i(a,b),d=0===c,e=c===a.length,f=b.getTime(),g=d?a[0][0]:a[c-1][0],h=e?a[c-1][0]:a[c][0],k=g.getTime(),l=h.getTime(),m=y+y/2<l-k;return d?f<k?x:w:e||m?"hide"===G?k<=f&&f<=k+y*F?w:x:j(f-k):w}function l(a){var b=f(u[0]).chain().keys().difference([p,o]).value(),d=m.lostData;return u.map(function(e){var f={};f[p]=e[p];for(var g=0,h=b.length;g<h;g++){var i=b[g];if(f[i]=c(e[i],a,v),d){var j=k(e[i],a);f._style={opacity:j}}}return f})}arguments.length&&this.data(a,b);var m=this.options,n=m.radius.map,o=m.series.map,p=m.key,q=this.timeDomain(),r=q[0],s=q[1],t=r,u=this._data,v=this._tLimit,w=this.opacity.max,x=this.opacity.min,y=this._gap;m.slider&&this.drawSlider(r,s,m.slider.tickFormat);var z=this._slider;this.xAxis.draw(),this.yAxis.draw(),this.circle.data(l(r)).update(),this._setTooltip();var A=this.circle,B=A.group,C=A.el,D=A._position,E=A._style,F=1,G="hide";m.lostData&&(F=m.lostData.blurSize||F,G=m.lostData.type||G);var H=this._duration||1e3*u.length,I=0,J=0;return this.drawByTime=function(a){return h(a),this},this.play=function(){return I=H,J=(new Date).getTime(),h(r),B.transition().duration(I).ease("linear").tween("time",g),this},this.pause=function(){B.transition().duration(0);var a=(new Date).getTime()-J;I=I<a?0:I-a},this.resume=function(){J=(new Date).getTime(),I&&(h(t),B.transition().duration(I).ease("linear").tween("time",g))},this.stop=function(){I=0,B.transition().duration(0),setTimeout(function(){t=r})},this},b.prototype.drawSlider=function(a,b,c){var d=this,f=this.container,g=this.baseLayer,i=f.parent.append("div").attr("class","motion-slider").style("left",g.margin.left+"px").style("width",g.width()+"px"),j=e.svg.axis(),k=e.time.scale().domain([a,b]);c&&j.tickFormat(function(a){return e.time.format(c)(new Date(a))});var l=h().animate(!1).scale(k).axis(j);return l.on("slide",function(a,b){d.drawByTime(new Date(b))}),i.call(l),this._slider=l,this},b.prototype.getSliderTime=function(){return new Date(this._slider.value())};var i=e.bisector(function(a){return a[0]}).left;return b}),e("chart/app.js",["require","./line_chart.js","./bar_chart.js","./column_chart.js","./pie_chart.js","./area_chart.js","./circle_chart.js","./single_bar_chart.js","./single_column_chart.js","./line_column_chart.js","./motion_chart.js"],function(a){"use strict";return{LineChart:a("./line_chart.js"),BarChart:a("./bar_chart.js"),ColumnChart:a("./column_chart.js"),PieChart:a("./pie_chart.js"),AreaChart:a("./area_chart.js"),CircleChart:a("./circle_chart.js"),SingleBarChart:a("./single_bar_chart.js"),SingleColumnChart:a("./single_column_chart.js"),LineColumnChart:a("./line_column_chart.js"),MotionChart:a("./motion_chart.js")}}),e("component/progress_circle.js",["require","d3","lodash","../global.js","../chart/base/chart.js"],function(a){"use strict";function b(a,b){h.call(this,a,b);var c,d,i,j;f.isObject(b.radius)?(d=b.radius.outer,i=b.radius.inner,c=d):f.isNumber(b.radius)&&(c=b.radius),c=g(c,240),d=g(d,c),i=g(i,.85*d),j=2*c;var k=this.container;return k.width(j).height(j),this._radius=c,this._minValue=g(this.options.min,0),this._maxValue=g(this.options.max,100),this.layer=k.createLayer("progress").point(k.width()/2,k.height()/2),this.arc=e.svg.arc().outerRadius(d).innerRadius(i).startAngle(0*(Math.PI/180)),this.colors(b.colors),this._duration=1e3,this}function c(a){return a/100*360*(Math.PI/180)}function d(a){return a/(Math.PI/180)/360*100}var e=a("d3"),f=a("lodash"),g=a("../global.js").orNumbers,h=a("../chart/base/chart.js");return b.prototype=Object.create(h.prototype),b.prototype.remove=function(){this._el.remove()},b.prototype._calcRatio=function(a){var b=this._minValue,c=this._maxValue,d=(a-b)/(c-b)*100;return Math.round(d)},b.prototype.draw=function(a){var b=g(a,this._value,this._minValue),d=this._colorSet,e=this._radius,f=this._calcRatio(b),h=c(f),i=this.layer,j=i.el,k=this.arc,l=this._el||j.append("g").attr("class","pc-group").datum(f);k.endAngle(360*(Math.PI/180));var m=this._background||l.append("path").attr("class","pc-background").attr("d",k).attr("fill",d.background),n=this._path;n||(n=l.append("path").attr("class","pc-value")),k.endAngle(h),n.attr("d",k).attr("fill",d.circle(h));var o=this._label;if(!o){var p=.4*e;o=l.append("text").attr("class","pc-label").style("font-size",p+"px").style("text-anchor","middle").attr("y",p/3)}return o.text(f+"%"),this._value=b,this._el=l,this._background=m,this._path=n,this._label=o,this},b.prototype.render=function(a){function b(a){var b=e.interpolate(p,a);return function(a){return p=b(a),q.attr("fill",j.circle(p)),l.endAngle(p)()}}function f(a){var b=e.interpolate(o,a);return function(a){o=b(a),this.textContent=Math.round(b(a))+"%"}}var h=g(a,this._value,this._minValue),i=this,j=this._colorSet,k=this._duration,l=this.arc,m=this._calcRatio(h),n=c(m),o=g(this._endRatio,0),p=o?c(o):0;this.draw(this._minValue);var q=this._path,r=this._label;return q.datum(n),q.transition().duration(k).attrTween("d",b).each("end",function(a){i._endRatio=d(a)}),r.datum(m),r.transition().duration(k).tween("text",f),this._value=h,this},b.prototype.play=b.prototype.render,b.prototype.value=function(a){return arguments.length?(this._value=a,this):this._value},b.prototype.min=function(a){return arguments.length?(this._minValue=a,this):this._minValue},b.prototype.max=function(a){return arguments.length?(this._maxValue=a,this):this._maxValue},b.prototype.colors=function(a){var b=this._colorSet||{},c=b.background,e=b.circle;return f.isString(a)||f.isFunction(a)?e=a:f.isArray(a)?(c=a[0],e=a[1]):f.isObject(a)&&(c=a.background,e=a.circle),f.isString(c)&&(b.background=function(){return c}),f.isString(e)?b.circle=function(){return e}:f.isFunction(e)?b.circle=function(a){return e(d(a))}:b.circle=function(){return null},this._colorSet=b,this._background&&this._background.attr("fill",b.background),this._path&&this._path.attr("fill",b.circle),this},b}),e("component/app.js",["require","./progress_circle.js","./slider.js"],function(a){"use strict";return{ProgressCircle:a("./progress_circle.js"),slider:a("./slider.js")}}),e("mobigen-web-chart",["require","d3","./module/app.js","./chart/app.js","./component/app.js"],function(a){"use strict";var b=a("d3"),c=a("./module/app.js"),d=a("./chart/app.js"),e=a("./component/app.js");return{version:"v0.5.2-23-g83a79a8",module:c,chart:d,data:{csv:b.csv.bind(b),tsv:b.tsv.bind(b),json:b.json.bind(b),text:b.text.bind(b)},color:{},component:e}}),e("d3",function(){return a}),e("lodash",function(){return b}),d("mobigen-web-chart")});